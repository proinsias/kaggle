---
pull_request_rules:
  - name: automatic merge on CI success and review
    conditions:
      - base=main
      - author~=github-actions
      - check-success-or-neutral=Analyse (pull_request)
      - check-success-or-neutral=Check code quality (pull_request)
      - check-success-or-neutral=CodeQL
      - check-success-or-neutral=Deadpendency Check
      - check-success-or-neutral=GitHub Actions (pull_request)
      - check-success-or-neutral=Python Source Analyzer
      - check-success-or-neutral=Scan-Build (pull_request)
      - check-success-or-neutral=Security Audit for Infrastructure
    actions:
      merge:
        method: merge
        strict: smart
  - name: automatic merge for Dependabot pull requests
    conditions:
      - base=main
      - author~=dependabot
      - check-success-or-neutral=Analyse (pull_request)
      - check-success-or-neutral=Check code quality (pull_request)
      - check-success-or-neutral=CodeQL
      - check-success-or-neutral=Deadpendency Check
      - check-success-or-neutral=GitHub Actions (pull_request)
      - check-success-or-neutral=Python Source Analyzer
      - check-success-or-neutral=Scan-Build (pull_request)
      - check-success-or-neutral=Security Audit for Infrastructure
    actions:
      merge:
        method: merge
        strict: smart
  - name: warn on conflicts
    conditions:
      - conflict
    actions:
      comment:
        message: "@{{author}} this pull request is now in conflict ðŸ˜©"
      label:
        add:
          - conflict
